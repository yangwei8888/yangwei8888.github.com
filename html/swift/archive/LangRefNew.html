

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Swift Language Reference Manual &mdash; Swift Programming Language documentation 0.1.9 documentation</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="Swift Programming Language documentation 0.1.9 documentation" href="../index.html"/>
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
</style>


  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Swift Programming Language documentation
          

          
          </a>

          
            
            
              <div class="version">
                0.1.9
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">swift docs</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../ABI.html">The Swift ABI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ARCOptimization.html">ARC Optimization for Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AccessControl.html">Access Control</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AccessControlInStdlib.html">Scope and introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../AccessControlInStdlib.html#public"><cite>public</cite></a></li>
<li class="toctree-l1"><a class="reference internal" href="../AccessControlInStdlib.html#internal"><cite>internal</cite></a></li>
<li class="toctree-l1"><a class="reference internal" href="../AccessControlInStdlib.html#private"><cite>private</cite></a></li>
<li class="toctree-l1"><a class="reference internal" href="../AccessControlInStdlib.html#leading-underscore-rule">Leading Underscore Rule</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Arrays.html">The Swift Array Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CallingConvention.html">The Swift Calling Convention</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DebuggingTheCompiler.html">Debugging the Swift Compiler</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Dependency Analysis.html">Dependency Analysis</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DriverInternals.html">Driver Design &amp; Internals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../DriverParseableOutput.html">Parseable Driver Output</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ErrorHandling.html">Error Handling in Swift 2.0</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ErrorHandlingRationale.html">Error Handling Rationale and Proposal</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Failable Initializers.html">Failable initializers</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Generics.html">Generics in Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GitWorkflows.html">Git Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GitWorkflows.html#svn-git-workflows">SVN -&gt; GIT Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="../HighLevelSILOptimizations.html">High-Level Optimizations in SIL</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Import.html">IMPORT SYNTAX</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Import.html#resolving-name-clashes">RESOLVING NAME CLASHES</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Import.html#future-extensions">FUTURE EXTENSIONS</a></li>
<li class="toctree-l1"><a class="reference internal" href="../IndexInvalidation.html">Index Invalidation Rules in the Swift Standard Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LibraryEvolution.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LibraryEvolution.html#using-versioned-api">Using Versioned API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LibraryEvolution.html#publishing-versioned-api">Publishing Versioned API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LibraryEvolution.html#giving-up-flexibility">Giving Up Flexibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LibraryEvolution.html#optimization">Optimization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LibraryEvolution.html#resilience-domains">Resilience Domains</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LibraryEvolution.html#protocol-conformances">Protocol Conformances</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LibraryEvolution.html#checking-binary-compatibility">Checking Binary Compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LibraryEvolution.html#summary">Summary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LibraryEvolution.html#glossary">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Literals.html">Literals</a></li>
<li class="toctree-l1"><a class="reference internal" href="../LogicalObjects.html">Logical Objects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Modules.html">High-Level Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Modules.html#import"><code class="docutils literal"><span class="pre">import</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../Modules.html#interoperability-with-objective-c-via-clang">Interoperability with Objective-C via Clang</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Modules.html#glossary">Glossary</a></li>
<li class="toctree-l1"><a class="reference internal" href="../MutationModel.html">Immutability and Read-Only Methods</a></li>
<li class="toctree-l1"><a class="reference internal" href="../ObjectInitialization.html">Object Initialization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OptimizationTips.html">Writing High-Performance Swift Code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OptimizationTips.html#enabling-optimizations">Enabling Optimizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OptimizationTips.html#whole-module-optimizations">Whole Module Optimizations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OptimizationTips.html#reducing-dynamic-dispatch">Reducing Dynamic Dispatch</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OptimizationTips.html#using-container-types-efficiently">Using Container Types Efficiently</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OptimizationTips.html#unchecked-operations">Unchecked operations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OptimizationTips.html#generics">Generics</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OptimizationTips.html#the-cost-of-large-swift-values">The cost of large swift values</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OptimizationTips.html#unsafe-code">Unsafe code</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OptimizationTips.html#protocols">Protocols</a></li>
<li class="toctree-l1"><a class="reference internal" href="../OptimizationTips.html#footnotes">Footnotes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Pattern Matching.html">Pattern Matching</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SIL.html">Swift Intermediate Language (SIL)</a></li>
<li class="toctree-l1"><a class="reference internal" href="../SequencesAndCollections.html">Sequences And Collections in Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Serialization.html">Swift Binary Serialization Format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../StdlibAPIGuidelines.html">Swift Standard Library API Design Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../StdlibRationales.html">Rationales for the Swift standard library designs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../StoredAndComputedVariables.html">Stored and Computed Variables</a></li>
<li class="toctree-l1"><a class="reference internal" href="../StringDesign.html">Swift String Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Testing.html">Testing Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TextFormatting.html">Text Formatting in Swift</a></li>
<li class="toctree-l1"><a class="reference internal" href="../TransparentAttr.html"><code class="docutils literal"><span class="pre">&#64;_transparent</span></code></a></li>
<li class="toctree-l1"><a class="reference internal" href="../TypeChecker.html">Type Checker Design and Implementation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contents.html">Contents</a></li>
<li class="toctree-l1"><a class="reference internal" href="../weak.html">Weak References</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="../index.html">Swift Programming Language documentation</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../index.html">Docs</a> &raquo;</li>
      
    <li>Swift Language Reference Manual</li>
    <li class="wy-breadcrumbs-aside">
      
        
          <a href="../_sources/archive/LangRefNew.txt" rel="nofollow"> View page source</a>
        
      
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="swift-language-reference-manual">
<h1><a class="toc-backref" href="#id2">Swift Language Reference Manual</a><a class="headerlink" href="#swift-language-reference-manual" title="Permalink to this headline">¬∂</a></h1>
<div class="contents topic" id="contents">
<p class="topic-title first">Contents</p>
<ul class="simple">
<li><a class="reference internal" href="#swift-language-reference-manual" id="id2">Swift Language Reference Manual</a><ul>
<li><a class="reference internal" href="#introduction" id="id3">Introduction</a><ul>
<li><a class="reference internal" href="#basic-goals" id="id4">Basic Goals</a></li>
<li><a class="reference internal" href="#basic-approach" id="id5">Basic Approach</a></li>
</ul>
</li>
<li><a class="reference internal" href="#phases-of-translation" id="id6">Phases of Translation</a></li>
<li><a class="reference internal" href="#lexical-structure" id="id7">Lexical Structure</a><ul>
<li><a class="reference internal" href="#whitespace-and-comments" id="id8">Whitespace and Comments</a></li>
<li><a class="reference internal" href="#reserved-punctuation-tokens" id="id9">Reserved Punctuation Tokens</a></li>
<li><a class="reference internal" href="#reserved-keywords" id="id10">Reserved Keywords</a></li>
<li><a class="reference internal" href="#contextual-keywords" id="id11">Contextual Keywords</a></li>
<li><a class="reference internal" href="#integer-literals" id="id12">Integer Literals</a></li>
<li><a class="reference internal" href="#floating-point-literals" id="id13">Floating Point Literals</a></li>
<li><a class="reference internal" href="#character-literals" id="id14">Character Literals</a></li>
<li><a class="reference internal" href="#string-literals" id="id15">String Literals</a></li>
<li><a class="reference internal" href="#langref-lexical-identifier" id="id16">Identifier Tokens</a></li>
<li><a class="reference internal" href="#operator-tokens" id="id17">Operator Tokens</a></li>
<li><a class="reference internal" href="#implementation-identifier-token" id="id18">Implementation Identifier Token</a></li>
<li><a class="reference internal" href="#escaped-identifiers" id="id19">Escaped Identifiers</a></li>
</ul>
</li>
<li><a class="reference internal" href="#name-binding" id="id20">Name Binding</a></li>
<li><a class="reference internal" href="#type-checking" id="id21">Type Checking</a></li>
<li><a class="reference internal" href="#declarations" id="id22">Declarations</a><ul>
<li><a class="reference internal" href="#import-declarations" id="id23">Import Declarations</a></li>
<li><a class="reference internal" href="#var-declarations" id="id24"><code class="docutils literal"><span class="pre">var</span></code> Declarations</a></li>
<li><a class="reference internal" href="#func-declarations" id="id25"><code class="docutils literal"><span class="pre">func</span></code> Declarations</a><ul>
<li><a class="reference internal" href="#function-signatures" id="id26">Function signatures</a></li>
</ul>
</li>
<li><a class="reference internal" href="#subscript-declarations" id="id27"><code class="docutils literal"><span class="pre">subscript</span></code> Declarations</a></li>
<li><a class="reference internal" href="#attribute-lists" id="id28">Attribute Lists</a></li>
</ul>
</li>
<li><a class="reference internal" href="#types" id="id29">Types</a><ul>
<li><a class="reference internal" href="#fully-typed-types" id="id30">Fully-Typed Types</a></li>
<li><a class="reference internal" href="#materializable-types" id="id31">Materializable Types</a></li>
</ul>
</li>
<li><a class="reference internal" href="#patterns" id="id32">Patterns</a><ul>
<li><a class="reference internal" href="#typed-patterns" id="id33">Typed Patterns</a></li>
<li><a class="reference internal" href="#any-patterns" id="id34">Any Patterns</a></li>
<li><a class="reference internal" href="#var-and-let-patterns" id="id35">&#8216;var&#8217; and &#8216;let&#8217; Patterns</a></li>
<li><a class="reference internal" href="#tuple-patterns" id="id36">Tuple Patterns</a></li>
<li><a class="reference internal" href="#is-patterns" id="id37"><code class="docutils literal"><span class="pre">is</span></code> Patterns</a></li>
<li><a class="reference internal" href="#enum-element-patterns" id="id38">Enum Element Patterns</a></li>
<li><a class="reference internal" href="#expressions-in-patterns" id="id39">Expressions in Patterns</a></li>
</ul>
</li>
<li><a class="reference internal" href="#expressions" id="id40">Expressions</a><ul>
<li><a class="reference internal" href="#function-application" id="id41">Function Application</a></li>
</ul>
</li>
<li><a class="reference internal" href="#statements" id="id42">Statements</a><ul>
<li><a class="reference internal" href="#break-statement" id="id43"><code class="docutils literal"><span class="pre">break</span></code> Statement</a></li>
<li><a class="reference internal" href="#continue-statement" id="id44"><code class="docutils literal"><span class="pre">continue</span></code> Statement</a></li>
<li><a class="reference internal" href="#switch-statement" id="id45"><code class="docutils literal"><span class="pre">switch</span></code> Statement</a></li>
<li><a class="reference internal" href="#fallthrough-statement" id="id46"><code class="docutils literal"><span class="pre">fallthrough</span></code> Statement</a></li>
</ul>
</li>
<li><a class="reference internal" href="#standard-library" id="id47">Standard Library</a></li>
<li><a class="reference internal" href="#builtin-module" id="id48">Builtin Module</a><ul>
<li><a class="reference internal" href="#simple-types" id="id49">Simple Types</a><ul>
<li><a class="reference internal" href="#void" id="id50">Void</a></li>
<li><a class="reference internal" href="#int-int8-int16-int32-int64" id="id51">Int, Int8, Int16, Int32, Int64</a></li>
<li><a class="reference internal" href="#langref-stdlib-float" id="id52">Int, Int8, Int16, Int32, Int64</a></li>
<li><a class="reference internal" href="#bool-true-false" id="id53">Bool, true, false</a></li>
</ul>
</li>
<li><a class="reference internal" href="#arithmetic-and-logical-operations" id="id54">Arithmetic and Logical Operations</a><ul>
<li><a class="reference internal" href="#arithmetic-operators" id="id55">Arithmetic Operators</a></li>
<li><a class="reference internal" href="#relational-and-equality-operators" id="id56">Relational and Equality Operators</a></li>
<li><a class="reference internal" href="#short-circuiting-logical-operators" id="id57">Short Circuiting Logical Operators</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id3">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¬∂</a></h2>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">This document has not been kept up to date.</p>
</div>
<div class="admonition-commentary admonition">
<p class="first admonition-title">Commentary</p>
<p class="last">In addition to the main spec, there are lots of open ended questions,
justification, and ideas of what best practices should be.  That random
discussion is placed in boxes like this one to clarify what is normative and
what is discussion.</p>
</div>
<p>This is the language reference manual for the Swift language, which is highly
volatile and constantly under development.  As the prototype evolves, this
document should be kept up to date with what is actually implemented.</p>
<p>The grammar and structure of the language is defined in BNF form in yellow
boxes.  Examples are shown in gray boxes, and assume that the standard library
is in use (unless otherwise specified).</p>
<div class="section" id="basic-goals">
<h3><a class="toc-backref" href="#id4">Basic Goals</a><a class="headerlink" href="#basic-goals" title="Permalink to this headline">¬∂</a></h3>
<div class="admonition-commentary admonition">
<p class="first admonition-title">Commentary</p>
<p class="last">A non-goal of the Swift project in general is to become some amazing research
project.  We really want to focus on delivering a real product, and having
the design and spec co-evolve.</p>
</div>
<p>In no particular order, and not explained well:</p>
<ul class="simple">
<li>Support building great frameworks and applications, with a specific focus on
permitting rich and powerful APIs.</li>
<li>Get the defaults right: this reduces the barrier to entry and increases the
odds that the right thing happens.</li>
<li>Through our support for building great APIs, we aim to provide an expressive
and productive language that is fun to program in.</li>
<li>Support low-level system programming.  We should want to write compilers,
operating system kernels, and media codecs in Swift.  This means that being
able to obtain high performance is really quite important.</li>
<li>Provide really great tools, like an IDE, debugger, profiling, etc.</li>
<li>Where possible, steal great ideas instead of innovating new things that will
work out in unpredictable ways.  It turns out that there are a lot of good
ideas already out there.</li>
<li>Memory safe by default: array overrun errors, uninitialized values, and other
problems endemic to C should not occur in Swift, even if it means some amount
of runtime overhead.  Eventually these checks will be disableable for people
who want ultimate performance in production builds.</li>
<li>Efficiently implementable with a static compiler: runtime compilation is
great technology and Swift may eventually get a runtime optimizer, but it is
a strong goal to be able to implement swift with just a static compiler.</li>
<li>Interoperate as transparently as possible with C, Objective-C, and C++
without having to write an equivalent of &#8220;extern C&#8221; for every referenced
definition.</li>
<li>Great support for efficient by-value types.</li>
<li>Elegant and natural syntax, aiming to be familiar and easy to transition to
for &#8220;C&#8221; people.  Differences from the C family should only be done when it
provides a significant win (e.g. eliminate declarator syntax).</li>
<li>Lots of other stuff too.</li>
</ul>
<p>A smaller wishlist goal is to support embedded sub-languages in swift, so that
we don&#8217;t get the OpenCL-is-like-C-but-very-different-in-many-details
problem.</p>
</div>
<div class="section" id="basic-approach">
<h3><a class="toc-backref" href="#id5">Basic Approach</a><a class="headerlink" href="#basic-approach" title="Permalink to this headline">¬∂</a></h3>
<div class="admonition-commentary admonition">
<p class="first admonition-title">Commentary</p>
<p class="last">Pushing as much of the language as realistic out of the compiler and into the
library is generally good for a few reasons: 1) we end up with a smaller core
language.  2) we force the language that is left to be highly expressive and
extensible.  3) this highly expressive language core can then be used to
build a lot of other great libraries, hopefully many we can&#8217;t even anticipate
at this point.</p>
</div>
<p>The basic approach in designing and implementing the Swift prototype was to
start at the very bottom of the stack (simple expressions and the trivial bits
of the type system) and incrementally build things up one brick at a time.
There is a big focus on making things as simple as possible and having a clean
internal core.  Where it makes sense, sugar is added on top to make the core
more expressive for common situations.</p>
<p>One major aspect that dovetails with expressivity, learnability, and focus on
API development is that much of the language is implemented in a <a class="reference internal" href="#langref-stdlib"><span>standard
library</span></a> (inspired in part by the Haskell Standard Prelude).
This means that things like <code class="docutils literal"><span class="pre">Int</span></code> and <code class="docutils literal"><span class="pre">Void</span></code> are not part of the language
itself, but are instead part of the standard library.</p>
</div>
</div>
<div class="section" id="phases-of-translation">
<h2><a class="toc-backref" href="#id6">Phases of Translation</a><a class="headerlink" href="#phases-of-translation" title="Permalink to this headline">¬∂</a></h2>
<div class="admonition-commentary admonition">
<p class="first admonition-title">Commentary</p>
<p class="last">Because Swift doesn&#8217;t rely on a C-style &#8220;lexer hack&#8221; to know what is a type
and what is a value, it is possible to fully parse a file without resolving
import declarations.</p>
</div>
<p>Swift has a strict separation between its phases of translation, and the
compiler follows a conceptually simple design.  The phases of translation
are:</p>
<ul class="simple">
<li><a class="reference internal" href="#langref-lexical"><span>Lexing</span></a>: A source file is broken into tokens
according to a (nearly, <code class="docutils literal"><span class="pre">/**/</span></code> comments can be nested) regular grammar.</li>
<li>Parsing and AST Building: The tokens are parsed according to the grammar set
out below.  The grammar is context free and does not require any &#8220;type
feedback&#8221; from the lexer or later stages.  During parsing, name binding for
references to local variables and other declarations that are not at module
(and eventually namespace) scope are bound.</li>
<li><a class="reference internal" href="#langref-namebind"><span>Name Binding</span></a>: At this phase, references to
non-local types and values are bound, and <a class="reference internal" href="#langref-decl-import"><span>import directives</span></a> are both validated and searched.  Name binding can
cause recursive compilation of modules that are referenced but not yet built.</li>
<li><a class="reference internal" href="#langref-typecheck"><span>Type Checking</span></a>: During this phase all types are
resolved within value definitions, <a class="reference internal" href="#langref-expr-call"><span>function application</span></a> and &lt;a href=&#8221;#expr-infix&#8221;&gt;binary expressions&lt;/a&gt; are
found and formed, and overloaded functions are resolved.</li>
<li>Code Generation: The AST is converted the LLVM IR, optimizations are
performed, and machine code generated.</li>
<li>Linking: runtime libraries and referenced modules are linked in.</li>
</ul>
<p>FIXME: &#8220;import Swift&#8221; implicitly added as the last import in a source file.</p>
</div>
<div class="section" id="lexical-structure">
<span id="langref-lexical"></span><h2><a class="toc-backref" href="#id7">Lexical Structure</a><a class="headerlink" href="#lexical-structure" title="Permalink to this headline">¬∂</a></h2>
<div class="admonition-commentary admonition">
<p class="first admonition-title">Commentary</p>
<p class="last">Not all characters are &#8220;taken&#8221; in the language, this is because it is still
growing.  As there becomes a reason to assign things into the identifier or
punctuation bucket, we will do so as swift evolves.</p>
</div>
<p>The lexical structure of a Swift file is very simple: the files are tokenized
according to the following productions and categories.  As is usual with most
languages, tokenization uses the maximal munch rule and whitespace separates
tokens.  This means that &#8220;<code class="docutils literal"><span class="pre">a</span> <span class="pre">b</span></code>&#8221; and &#8220;<code class="docutils literal"><span class="pre">ab</span></code>&#8221; lex into different token
streams and are therefore different in the grammar.</p>
<div class="section" id="whitespace-and-comments">
<span id="langref-lexical-whitespace"></span><h3><a class="toc-backref" href="#id8">Whitespace and Comments</a><a class="headerlink" href="#whitespace-and-comments" title="Permalink to this headline">¬∂</a></h3>
<div class="admonition-commentary admonition">
<p class="first admonition-title">Commentary</p>
<p class="last">Nested block comments are important because we don&#8217;t have the nestable <code class="docutils literal"><span class="pre">#if</span>
<span class="pre">0</span></code> hack from C to rely on.</p>
</div>
<div class="highlight-none"><div class="highlight"><pre>whitespace ::= &#39; &#39;
whitespace ::= &#39;\n&#39;
whitespace ::= &#39;\r&#39;
whitespace ::= &#39;\t&#39;
whitespace ::= &#39;\0&#39;
comment    ::= //.*[\n\r]
comment    ::= /* .... */
</pre></div>
</div>
<p>Space, newline, tab, and the nul byte are all considered whitespace and are
discarded, with one exception:  a &#8216;<code class="docutils literal"><span class="pre">(</span></code>&#8216; or &#8216;<code class="docutils literal"><span class="pre">[</span></code>&#8216; which does not follow a
non-whitespace character is different kind of token (called <em>spaced</em>)
from one which does not (called <em>unspaced</em>).  A &#8216;<code class="docutils literal"><span class="pre">(</span></code>&#8216; or &#8216;<code class="docutils literal"><span class="pre">[</span></code>&#8216; at the
beginning of a file is spaced.</p>
<p>Comments may follow the BCPL style, starting with a &#8220;<code class="docutils literal"><span class="pre">//</span></code>&#8221; and running to the
end of the line, or may be recursively nested <code class="docutils literal"><span class="pre">/**/</span></code> style comments.  Comments
are ignored and treated as whitespace.</p>
</div>
<div class="section" id="reserved-punctuation-tokens">
<span id="langref-lexical-reserved-punctuation"></span><h3><a class="toc-backref" href="#id9">Reserved Punctuation Tokens</a><a class="headerlink" href="#reserved-punctuation-tokens" title="Permalink to this headline">¬∂</a></h3>
<div class="admonition-commentary admonition">
<p class="first admonition-title">Commentary</p>
<p class="last">Note that <code class="docutils literal"><span class="pre">-&gt;</span></code> is used for function types <code class="docutils literal"><span class="pre">()</span> <span class="pre">-&gt;</span> <span class="pre">Int</span></code>, not pointer
dereferencing.</p>
</div>
<div class="highlight-none"><div class="highlight"><pre>punctuation ::= &#39;(&#39;
punctuation ::= &#39;)&#39;
punctuation ::= &#39;{&#39;
punctuation ::= &#39;}&#39;
punctuation ::= &#39;[&#39;
punctuation ::= &#39;]&#39;
punctuation ::= &#39;.&#39;
punctuation ::= &#39;,&#39;
punctuation ::= &#39;;&#39;
punctuation ::= &#39;:&#39;
punctuation ::= &#39;=&#39;
punctuation ::= &#39;-&gt;&#39;
punctuation ::= &#39;&amp;&#39; // unary prefix operator
</pre></div>
</div>
<p>These are all reserved punctuation that are lexed into tokens.  Most other
non-alphanumeric characters are matched as <a class="reference internal" href="#langref-lexical-operator"><span>operators</span></a>.  Unlike operators, these tokens are not
overloadable.</p>
</div>
<div class="section" id="reserved-keywords">
<span id="langref-lexical-keyword"></span><h3><a class="toc-backref" href="#id10">Reserved Keywords</a><a class="headerlink" href="#reserved-keywords" title="Permalink to this headline">¬∂</a></h3>
<div class="admonition-commentary admonition">
<p class="first admonition-title">Commentary</p>
<p class="last">The number of keywords is reduced by pushing most functionality into the
library (e.g. &#8220;builtin&#8221; datatypes like <code class="docutils literal"><span class="pre">Int</span></code> and <code class="docutils literal"><span class="pre">Bool</span></code>).  This allows us
to add new stuff to the library in the future without worrying about
conflicting with the user&#8217;s namespace.</p>
</div>
<div class="highlight-none"><div class="highlight"><pre>// Declarations and Type Keywords
keyword ::= &#39;class&#39;
keyword ::= &#39;destructor&#39;
keyword ::= &#39;extension&#39;
keyword ::= &#39;import&#39;
keyword ::= &#39;init&#39;
keyword ::= &#39;func&#39;
keyword ::= &#39;enum&#39;
keyword ::= &#39;protocol&#39;
keyword ::= &#39;struct&#39;
keyword ::= &#39;subscript&#39;
keyword ::= &#39;Type&#39;
keyword ::= &#39;typealias&#39;
keyword ::= &#39;var&#39;
keyword ::= &#39;where&#39;

// Statements
keyword ::= &#39;break&#39;
keyword ::= &#39;case&#39;
keyword ::= &#39;continue&#39;
keyword ::= &#39;default&#39;
keyword ::= &#39;do&#39;
keyword ::= &#39;else&#39;
keyword ::= &#39;if&#39;
keyword ::= &#39;in&#39;
keyword ::= &#39;for&#39;
keyword ::= &#39;return&#39;
keyword ::= &#39;switch&#39;
keyword ::= &#39;then&#39;
keyword ::= &#39;while&#39;

// Expressions
keyword ::= &#39;as&#39;
keyword ::= &#39;is&#39;
keyword ::= &#39;new&#39;
keyword ::= &#39;super&#39;
keyword ::= &#39;self&#39;
keyword ::= &#39;Self&#39;
keyword ::= &#39;type&#39;
keyword ::= &#39;__COLUMN__&#39;
keyword ::= &#39;__FILE__&#39;
keyword ::= &#39;__LINE__&#39;
</pre></div>
</div>
<p>These are the builtin keywords. Keywords can still be used as names via
<cite>escaped identifiers &lt;langref.lexical.escapedident&gt;</cite>.</p>
</div>
<div class="section" id="contextual-keywords">
<h3><a class="toc-backref" href="#id11">Contextual Keywords</a><a class="headerlink" href="#contextual-keywords" title="Permalink to this headline">¬∂</a></h3>
<p>Swift uses several contextual keywords at various parts of the language.
Contextual keywords are not reserved words, meaning that they can be used as
identifiers.  However, in certain contexts, they act as keywords, and are
represented as such in the grammar below.  The following identifiers act as
contextual keywords within the language:</p>
<div class="highlight-none"><div class="highlight"><pre>get
infix
mutating
nonmutating
operator
override
postfix
prefix
set
</pre></div>
</div>
</div>
<div class="section" id="integer-literals">
<span id="langref-lexical-integer-literal"></span><h3><a class="toc-backref" href="#id12">Integer Literals</a><a class="headerlink" href="#integer-literals" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>integer_literal ::= [0-9][0-9_]*
integer_literal ::= 0x[0-9a-fA-F][0-9a-fA-F_]*
integer_literal ::= 0o[0-7][0-7_]*
integer_literal ::= 0b[01][01_]*
</pre></div>
</div>
<p>Integer literal tokens represent simple integer values of unspecified
precision.  They may be expressed in decimal, binary with the &#8216;<code class="docutils literal"><span class="pre">0b</span></code>&#8216; prefix,
octal with the &#8216;<code class="docutils literal"><span class="pre">0o</span></code>&#8216; prefix, or hexadecimal with the &#8216;<code class="docutils literal"><span class="pre">0x</span></code>&#8216; prefix.
Unlike C, a leading zero does not affect the base of the literal.</p>
<p>Integer literals may contain underscores at arbitrary positions after the first
digit.  These underscores may be used for human readability and do not affect
the value of the literal.</p>
<div class="highlight-python"><div class="highlight"><pre>789
0789

1000000
1_000_000

0b111_101_101
0o755

0b1111_1011
0xFB
</pre></div>
</div>
</div>
<div class="section" id="floating-point-literals">
<span id="langref-lexical-floating-literal"></span><h3><a class="toc-backref" href="#id13">Floating Point Literals</a><a class="headerlink" href="#floating-point-literals" title="Permalink to this headline">¬∂</a></h3>
<div class="admonition-commentary admonition">
<p class="first admonition-title">Commentary</p>
<p class="last">We require a digit on both sides of the dot to allow lexing &#8220;<code class="docutils literal"><span class="pre">4.km</span></code>&#8221; as
&#8220;<code class="docutils literal"><span class="pre">4</span> <span class="pre">.</span> <span class="pre">km</span></code>&#8221; instead of &#8220;<code class="docutils literal"><span class="pre">4.</span> <span class="pre">km</span></code>&#8221; and for a series of dots to be an
operator (for ranges).  The regex for decimal literals is same as Java, and
the one for hex literals is the same as C99, except that we do not allow a
trailing suffix that specifies a precision.</p>
</div>
<div class="highlight-none"><div class="highlight"><pre>floating_literal ::= [0-9][0-9_]*\.[0-9][0-9_]*
floating_literal ::= [0-9][0-9_]*\.[0-9][0-9_]*[eE][+-]?[0-9][0-9_]*
floating_literal ::= [0-9][0-9_]*[eE][+-]?[0-9][0-9_]*
floating_literal ::= 0x[0-9A-Fa-f][0-9A-Fa-f_]*
                       (\.[0-9A-Fa-f][0-9A-Fa-f_]*)?[pP][+-]?[0-9][0-9_]*
</pre></div>
</div>
<p>Floating point literal tokens represent floating point values of unspecified
precision.  Decimal and hexadecimal floating-point literals are supported.</p>
<p>The integer, fraction, and exponent of a floating point literal may each
contain underscores at arbitrary positions after their first digits.  These
underscores may be used for human readability and do not affect the value of
the literal.  Each part of the floating point literal must however start with a
digit; <code class="docutils literal"><span class="pre">1._0</span></code> would be a reference to the <code class="docutils literal"><span class="pre">_0</span></code> member of <code class="docutils literal"><span class="pre">1</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre>1.0
1000000.75
1_000_000.75

0x1.FFFFFFFFFFFFFp1022
0x1.FFFF_FFFF_FFFF_Fp1_022
</pre></div>
</div>
</div>
<div class="section" id="character-literals">
<span id="langref-lexical-character-literal"></span><h3><a class="toc-backref" href="#id14">Character Literals</a><a class="headerlink" href="#character-literals" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>character_literal ::= &#39;[^&#39;\\\n\r]|character_escape&#39;
character_escape  ::= [\]0 [\][\] | [\]t | [\]n | [\]r | [\]&quot; | [\]&#39;
character_escape  ::= [\]x hex hex
character_escape  ::= [\]u hex hex hex hex
character_escape  ::= [\]U hex hex hex hex hex hex hex hex
hex               ::= [0-9a-fA-F]
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">character_literal</span></code> tokens represent a single character, and are surrounded
by single quotes.</p>
<p>The ASCII and Unicode character escapes:</p>
<div class="highlight-none"><div class="highlight"><pre>\0 == nul
\n == new line
\r == carriage return
\t == horizontal tab
\u == small Unicode code points
\U == large Unicode code points
\x == raw ASCII byte (less than 0x80)
</pre></div>
</div>
</div>
<div class="section" id="string-literals">
<span id="langref-lexical-string-literal"></span><h3><a class="toc-backref" href="#id15">String Literals</a><a class="headerlink" href="#string-literals" title="Permalink to this headline">¬∂</a></h3>
<div class="admonition-commentary admonition">
<p class="first admonition-title">Commentary</p>
<p class="last">FIXME: Forcing <code class="docutils literal"><span class="pre">+</span></code> to concatenate strings is somewhat gross, a proper protocol
would be better.</p>
</div>
<div class="highlight-none"><div class="highlight"><pre>string_literal   ::= [&quot;]([^&quot;\\\n\r]|character_escape|escape_expr)*[&quot;]
escape_expr      ::= [\]escape_expr_body
escape_expr_body ::= [(]escape_expr_body[)]
escape_expr_body ::= [^\n\r&quot;()]
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">string_literal</span></code> tokens represent a string, and are surrounded by double
quotes.  String literals cannot span multiple lines.</p>
<p>String literals may contain embedded expressions in them (known as
&#8220;interpolated expressions&#8221;) subject to some specific lexical constraints: the
expression may not contain a double quote [&#8220;], newline [n], or carriage return
[r].  All parentheses must be balanced.</p>
<p>In addition to these lexical rules, an interpolated expression must satisfy the
<a class="reference internal" href="#langref-expr"><span>expr</span></a> production of the general swift grammar.  This
expression is evaluated, and passed to the constructor for the inferred type of
the string literal.  It is concatenated onto any fixed portions of the string
literal with a global &#8220;<code class="docutils literal"><span class="pre">+</span></code>&#8221; operator that is found through normal name
lookup.</p>
<div class="highlight-python"><div class="highlight"><pre>// Simple string literal.
&quot;Hello world!&quot;

// Interpolated expressions.
&quot;\(min)...\(max)&quot; + &quot;Result is \((4+i)*j)&quot;
</pre></div>
</div>
</div>
<div class="section" id="langref-lexical-identifier">
<span id="identifier-tokens"></span><h3><a class="toc-backref" href="#id16">Identifier Tokens</a><a class="headerlink" href="#langref-lexical-identifier" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>identifier ::= id-start id-continue*

// An identifier can start with an ASCII letter or underscore...
id-start ::= [A-Za-z_]

// or a Unicode alphanumeric character in the Basic Multilingual Plane...
// (excluding combining characters, which can&#39;t appear initially)
id-start ::= [\u00A8\u00AA\u00AD\u00AF\u00B2-\u00B5\u00B7-00BA]
id-start ::= [\u00BC-\u00BE\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u00FF]
id-start ::= [\u0100-\u02FF\u0370-\u167F\u1681-\u180D\u180F-\u1DBF]
id-start ::= [\u1E00-\u1FFF]
id-start ::= [\u200B-\u200D\u202A-\u202E\u203F-\u2040\u2054\u2060-\u206F]
id-start ::= [\u2070-\u20CF\u2100-\u218F\u2460-\u24FF\u2776-\u2793]
id-start ::= [\u2C00-\u2DFF\u2E80-\u2FFF]
id-start ::= [\u3004-\u3007\u3021-\u302F\u3031-\u303F\u3040-\uD7FF]
id-start ::= [\uF900-\uFD3D\uFD40-\uFDCF\uFDF0-\uFE1F\uFE30-FE44]
id-start ::= [\uFE47-\uFFFD]

// or a non-private-use, valid code point outside of the BMP.
id-start ::= [\u10000-\u1FFFD\u20000-\u2FFFD\u30000-\u3FFFD\u40000-\u4FFFD]
id-start ::= [\u50000-\u5FFFD\u60000-\u6FFFD\u70000-\u7FFFD\u80000-\u8FFFD]
id-start ::= [\u90000-\u9FFFD\uA0000-\uAFFFD\uB0000-\uBFFFD\uC0000-\uCFFFD]
id-start ::= [\uD0000-\uDFFFD\uE0000-\uEFFFD]

// After the first code point, an identifier can contain ASCII digits...
id-continue ::= [0-9]

// and/or combining characters...
id-continue ::= [\u0300-\u036F\u1DC0-\u1DFF\u20D0-\u20FF\uFE20-\uFE2F]

// in addition to the starting character set.
id-continue ::= id-start

identifier-or-any ::= identifier
identifier-or-any ::= &#39;_&#39;
</pre></div>
</div>
<p>The set of valid identifier characters is consistent with WG14 N1518,
&#8220;Recommendations for extended identifier characters for C and C++&#8221;.  This
roughly corresponds to the alphanumeric characters in the Basic Multilingual
Plane and all non-private-use code points outside of the BMP.  It excludes
mathematical symbols, arrows, line and box drawing characters, and private-use
and invalid code points.  An identifier cannot begin with one of the ASCII
digits &#8216;0&#8217; through &#8216;9&#8217; or with a combining character.</p>
<p>The Swift compiler does not normalize Unicode source code, and matches
identifiers by code points only.  Source code must be normalized to a consistent
normalization form before being submitted to the compiler.</p>
<div class="highlight-python"><div class="highlight"><pre>// Valid identifiers
foo
_0
swift
verniss√©
Èó™‰∫Æ
◊û◊ë◊®◊ô◊ß
üòÑ

// Invalid identifiers
‚òÉ     // Is a symbol
0cool // Starts with an ASCII digit
 ÃÅfoo  // Starts with a combining character (U+0301)
Ô£ø     // Is a private-use character (U+F8FF)
</pre></div>
</div>
</div>
<div class="section" id="operator-tokens">
<span id="langref-lexical-operator"></span><h3><a class="toc-backref" href="#id17">Operator Tokens</a><a class="headerlink" href="#operator-tokens" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>&lt;a name=&quot;operator&quot;&gt;operator&lt;/a&gt; ::= [/=-+*%&lt;&gt;!&amp;|^~]+
&lt;a name=&quot;operator&quot;&gt;operator&lt;/a&gt; ::= \.+

&lt;a href=&quot;#reserved_punctuation&quot;&gt;Reserved for punctuation&lt;/a&gt;: &#39;.&#39;, &#39;=&#39;, &#39;-&gt;&#39;, and unary prefix &#39;&amp;&#39;
&lt;a href=&quot;#whitespace&quot;&gt;Reserved for comments&lt;/a&gt;: &#39;//&#39;, &#39;/*&#39; and &#39;*/&#39;

operator-binary ::= operator
operator-prefix ::= operator
operator-postfix ::= operator

left-binder  ::= [ \r\n\t\(\[\{,;:]
right-binder ::= [ \r\n\t\)\]\},;:]

&lt;a name=&quot;any-identifier&quot;&gt;any-identifier&lt;/a&gt; ::= identifier | operator
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">operator-binary</span></code>, <code class="docutils literal"><span class="pre">operator-prefix</span></code>, and <code class="docutils literal"><span class="pre">operator-postfix</span></code> are
distinguished by immediate lexical context.  An operator token is called
<em>left-bound</em> if it is immediately preceded by a character matching
<code class="docutils literal"><span class="pre">left-binder</span></code>.  An operator token is called <em>right-bound</em> if it is
immediately followed by a character matching <code class="docutils literal"><span class="pre">right-binder</span></code>.  An operator
token is an <code class="docutils literal"><span class="pre">operator-prefix</span></code> if it is right-bound but not left-bound, an
<code class="docutils literal"><span class="pre">operator-postfix</span></code> if it is left-bound but not right-bound, and an
<code class="docutils literal"><span class="pre">operator-binary</span></code> in either of the other two cases.</p>
<p>As an exception, an operator immediately followed by a dot (&#8216;<code class="docutils literal"><span class="pre">.</span></code>&#8216;) is only
considered right-bound if not already left-bound.  This allows <code class="docutils literal"><span class="pre">a!.prop</span></code> to
be parsed as <code class="docutils literal"><span class="pre">(a!).prop</span></code> rather than as <code class="docutils literal"><span class="pre">a</span> <span class="pre">!</span> <span class="pre">.prop</span></code>.</p>
<p>The &#8216;<code class="docutils literal"><span class="pre">!</span></code>&#8216; operator is postfix if it is left-bound.</p>
<p>The &#8216;<code class="docutils literal"><span class="pre">?</span></code>&#8216; operator is postfix (and therefore not the ternary operator) if it
is left-bound.  The sugar form for <code class="docutils literal"><span class="pre">Optional</span></code> types must be left-bound.</p>
<p>When parsing certain grammatical constructs that involve &#8216;<code class="docutils literal"><span class="pre">&lt;</span></code>&#8216; and &#8216;<code class="docutils literal"><span class="pre">&gt;</span></code>&#8216;
(such as &lt;a href=&#8221;#type-composition&#8221;&gt;protocol composition types&lt;/a&gt;), an
<code class="docutils literal"><span class="pre">operator</span></code> with a leading &#8216;<code class="docutils literal"><span class="pre">&lt;</span></code>&#8216; or &#8216;<code class="docutils literal"><span class="pre">&gt;</span></code>&#8216; may be split into two or more
tokens: the leading &#8216;<code class="docutils literal"><span class="pre">&lt;</span></code>&#8216; or &#8216;<code class="docutils literal"><span class="pre">&gt;</span></code>&#8216; and the remainder of the token, which
may be an <code class="docutils literal"><span class="pre">operator</span></code> or <code class="docutils literal"><span class="pre">punctuation</span></code> token that may itself be further
split.  This rule allows us to parse nested constructs such as <code class="docutils literal"><span class="pre">A&lt;B&lt;C&gt;&gt;</span></code>
without requiring spaces between the closing &#8216;<code class="docutils literal"><span class="pre">&gt;</span></code>&#8216;s.</p>
</div>
<div class="section" id="implementation-identifier-token">
<span id="langref-lexical-dollarident"></span><h3><a class="toc-backref" href="#id18">Implementation Identifier Token</a><a class="headerlink" href="#implementation-identifier-token" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>dollarident ::= &#39;$&#39; id-continue+
</pre></div>
</div>
<p>Tokens that start with a <code class="docutils literal"><span class="pre">$</span></code> are separate class of identifier, which are
fixed purpose names that are defined by the implementation.</p>
</div>
<div class="section" id="escaped-identifiers">
<span id="langref-lexical-escapedident"></span><h3><a class="toc-backref" href="#id19">Escaped Identifiers</a><a class="headerlink" href="#escaped-identifiers" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>identifier ::= &#39;`&#39; id-start id-continue* &#39;`&#39;
</pre></div>
</div>
<p>An identifier that would normally be a <cite>keyword &lt;langref.lexical.keyword&gt;</cite> may
be used as an identifier by wrapping it in backticks &#8216;<code class="docutils literal"><span class="pre">\`</span></code>&#8216;, for example:</p>
<div class="highlight-python"><div class="highlight"><pre>func `class`() { /* ... */ }
let `type` = 0.type
</pre></div>
</div>
<p>Any identifier may be escaped, though only identifiers that would normally be
parsed as keywords are required to be. The backtick-quoted string must still
form a valid, non-operator identifier:</p>
<div class="highlight-python"><div class="highlight"><pre>let `0` = 0       // Error, &quot;0&quot; doesn&#39;t start with an alphanumeric
let `foo-bar` = 0 // Error, &#39;-&#39; isn&#39;t an identifier character
let `+` = 0       // Error, &#39;+&#39; is an operator
</pre></div>
</div>
</div>
</div>
<div class="section" id="name-binding">
<span id="langref-namebind"></span><h2><a class="toc-backref" href="#id20">Name Binding</a><a class="headerlink" href="#name-binding" title="Permalink to this headline">¬∂</a></h2>
</div>
<div class="section" id="type-checking">
<span id="langref-typecheck"></span><h2><a class="toc-backref" href="#id21">Type Checking</a><a class="headerlink" href="#type-checking" title="Permalink to this headline">¬∂</a></h2>
</div>
<div class="section" id="declarations">
<span id="langref-decl"></span><h2><a class="toc-backref" href="#id22">Declarations</a><a class="headerlink" href="#declarations" title="Permalink to this headline">¬∂</a></h2>
<p>...</p>
<div class="section" id="import-declarations">
<span id="langref-decl-import"></span><h3><a class="toc-backref" href="#id23">Import Declarations</a><a class="headerlink" href="#import-declarations" title="Permalink to this headline">¬∂</a></h3>
<p>...</p>
</div>
<div class="section" id="var-declarations">
<span id="langref-decl-var"></span><h3><a class="toc-backref" href="#id24"><code class="docutils literal"><span class="pre">var</span></code> Declarations</a><a class="headerlink" href="#var-declarations" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>decl-var-head-kw ::= (&#39;static&#39; | &#39;class&#39;)? &#39;override&#39;?
decl-var-head-kw ::= &#39;override&#39;? (&#39;static&#39; | &#39;class&#39;)?

decl-var-head  ::= attribute-list decl-var-head-kw? &#39;var&#39;

decl-var       ::= decl-var-head pattern initializer?  (&#39;,&#39; pattern initializer?)*

// &#39;get&#39; is implicit in this syntax.
decl-var       ::= decl-var-head identifier &#39;:&#39; type brace-item-list

decl-var       ::= decl-var-head identifier &#39;:&#39; type &#39;{&#39; get-set &#39;}&#39;

decl-var       ::= decl-var-head identifier &#39;:&#39; type initializer? &#39;{&#39; willset-didset &#39;}&#39;

// For use in protocols.
decl-var       ::= decl-var-head identifier &#39;:&#39; type &#39;{&#39; get-set-kw &#39;}&#39;

get-set        ::= get set?
get-set        ::= set get

get            ::= attribute-list ( &#39;mutating&#39; | &#39;nonmutating&#39; )? &#39;get&#39; brace-item-list
set            ::= attribute-list ( &#39;mutating&#39; | &#39;nonmutating&#39; )? &#39;set&#39; set-name? brace-item-list
set-name       ::= &#39;(&#39; identifier &#39;)&#39;

willset-didset ::= willset didset?
willset-didset ::= didset willset?

willset        ::= attribute-list &#39;willSet&#39; set-name? brace-item-list
didset         ::= attribute-list &#39;didSet&#39; set-name? brace-item-list

get-kw         ::= attribute-list ( &#39;mutating&#39; | &#39;nonmutating&#39; )? &#39;get&#39;
set-kw         ::= attribute-list ( &#39;mutating&#39; | &#39;nonmutating&#39; )? &#39;set&#39;
get-set-kw     ::= get-kw set-kw?
get-set-kw     ::= set-kw get-kw
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">var</span></code> declarations form the backbone of value declarations in Swift.  A
<code class="docutils literal"><span class="pre">var</span></code> declaration takes a pattern and an optional initializer, and declares
all the pattern-identifiers in the pattern as variables.  If there is an
initializer and the pattern is <a class="reference internal" href="#langref-types-fully-typed"><span>fully-typed</span></a>,
the initializer is converted to the type of the pattern.  If there is an
initializer and the pattern is not fully-typed, the type of initializer is
computed independently of the pattern, and the type of the pattern is derived
from the initializer.  If no initializer is specified, the pattern must be
fully-typed, and the values are default-initialized.</p>
<p>If there is more than one pattern in a <code class="docutils literal"><span class="pre">var</span></code> declaration, they are each
considered independently, as if there were multiple declarations.  The initial
<code class="docutils literal"><span class="pre">attribute-list</span></code> is shared between all the declared variables.</p>
<p>A var declaration may contain a getter and (optionally) a setter, which will
be used when reading or writing the variable, respectively.  Such a variable
does not have any associated storage.  A <code class="docutils literal"><span class="pre">var</span></code> declaration with a getter or
setter must have a type (call it <code class="docutils literal"><span class="pre">T</span></code>).  The getter function, whose
body is provided as part of the <code class="docutils literal"><span class="pre">var-get</span></code> clause, has type <code class="docutils literal"><span class="pre">()</span> <span class="pre">-&gt;</span> <span class="pre">T</span></code>.
Similarly, the setter function, whose body is part of the <code class="docutils literal"><span class="pre">var-set</span></code> clause
(if provided), has type <code class="docutils literal"><span class="pre">(T)</span> <span class="pre">-&gt;</span> <span class="pre">()</span></code>.</p>
<p>If the <code class="docutils literal"><span class="pre">var-set</span></code> or <code class="docutils literal"><span class="pre">willset</span></code> clause contains a <code class="docutils literal"><span class="pre">set-name</span></code> clause, the
identifier of that clause is used as the name of the parameter to the setter or
the observing accessor.  Otherwise, the parameter name is <code class="docutils literal"><span class="pre">newValue</span></code>.  Same
applies to <code class="docutils literal"><span class="pre">didset</span></code> clause, but the default parameter name is <code class="docutils literal"><span class="pre">oldValue</span></code>.</p>
<p>FIXME: Should the type of a pattern which isn&#8217;t fully typed affect the
type-checking of the expression (i.e. should we compute a structured dependent
type)?</p>
<p>Like all other declarations, <code class="docutils literal"><span class="pre">var</span></code>s can optionally have a list of
<a class="reference internal" href="#langref-decl-attribute-list"><span>attributes</span></a> applied to them.</p>
<p>The type of a variable must be <a class="reference internal" href="#langref-types-materializable"><span>materializable</span></a>. A variable is an lvalue unless it has a
<code class="docutils literal"><span class="pre">var-get</span></code> clause but not <code class="docutils literal"><span class="pre">var-set</span></code> clause.</p>
<p>Here are some examples of <code class="docutils literal"><span class="pre">var</span></code> declarations:</p>
<div class="highlight-python"><div class="highlight"><pre>// Simple examples.
var a = 4
var b: Int
var c: Int = 42

// This decodes the tuple return value into independently named parts
// and both &#39;val&#39; and &#39;err&#39; are in scope after this line.
var (val, err) = foo()

// Variable getter/setter
var _x: Int = 0
var x_modify_count: Int = 0
var x1: Int {
  return _x
}
var x2: Int {
  get {
  return _x
  }
  set {
    x_modify_count = x_modify_count + 1
    _x = value
  }
}
</pre></div>
</div>
<p>Note that <code class="docutils literal"><span class="pre">get</span></code>, <code class="docutils literal"><span class="pre">set</span></code>, <code class="docutils literal"><span class="pre">willSet</span></code> and <code class="docutils literal"><span class="pre">didSet</span></code> are context-sensitive
keywords.</p>
<p><code class="docutils literal"><span class="pre">static</span></code> keyword is allowed inside structs and enums, and extensions of
those.</p>
<p><code class="docutils literal"><span class="pre">class</span></code> keyword is allowed inside classes, class extensions, and
protocols.</p>
<div class="admonition-ambiguity-1 admonition">
<p class="first admonition-title">Ambiguity 1</p>
<p>The production for implicit <code class="docutils literal"><span class="pre">get</span></code> makes this grammar ambiguous.  For example:</p>
<div class="highlight-python"><div class="highlight"><pre>class A {
  func get(_: () -&gt; Int) {}
  var a: Int {
    get { return 0 } // Getter declaration or call to &#39;get&#39; with a trailing closure?
  }
  // But if this was intended as a call to &#39;get&#39; function, then we have a
  // getter without a &#39;return&#39; statement, so the code is invalid anyway.
}
</pre></div>
</div>
<p>We disambiguate towards <code class="docutils literal"><span class="pre">get-set</span></code> or <code class="docutils literal"><span class="pre">willset-didset</span></code> production if the
first token after <code class="docutils literal"><span class="pre">{</span></code> is the corresponding keyword, possibly preceded by
attributes.  Thus, the following code is rejected because we are expecting
<code class="docutils literal"><span class="pre">{</span></code> after <code class="docutils literal"><span class="pre">set</span></code>:</p>
<div class="last highlight-python"><div class="highlight"><pre>class A {
  var set: Foo
  var a: Int {
    set.doFoo()
    return 0
  }
}
</pre></div>
</div>
</div>
<div class="admonition-ambiguity-2 admonition">
<p class="first admonition-title">Ambiguity 2</p>
<p>The production with <code class="docutils literal"><span class="pre">initializer</span></code> and an accessor block is ambiguous.  For
example:</p>
<div class="highlight-python"><div class="highlight"><pre>func takeClosure(_: () -&gt; Int) {}
struct A {
  var willSet: Int
  var a: Int = takeClosure {
    willSet {} // A &#39;willSet&#39; declaration or a call to &#39;takeClosure&#39;?
  }
}
</pre></div>
</div>
<p class="last">We disambiguate towards <code class="docutils literal"><span class="pre">willget-didset</span></code> production if the first token
after <code class="docutils literal"><span class="pre">{</span></code> is the keyword <code class="docutils literal"><span class="pre">willSet</span></code> or <code class="docutils literal"><span class="pre">didSet</span></code>, possibly preceded by
attributes.</p>
</div>
<div class="admonition-rationale admonition">
<p class="first admonition-title">Rationale</p>
<p class="last">Even though it is possible to do further checks and speculatively parse more,
it introduces unjustified complexity to cover (hopefully rare) corner cases.
In ambiguous cases users can always opt-out of the trailing closure syntax by
using explicit parentheses in the function call.</p>
</div>
</div>
<div class="section" id="func-declarations">
<span id="langref-decl-func"></span><h3><a class="toc-backref" href="#id25"><code class="docutils literal"><span class="pre">func</span></code> Declarations</a><a class="headerlink" href="#func-declarations" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>// Keywords can be specified in any order.
decl-func-head-kw ::= ( &#39;static&#39; | &#39;class&#39; )? &#39;override&#39;? ( &#39;mutating&#39; | &#39;nonmutating&#39; )?

decl-func        ::= attribute-list decl-func-head-kw? &#39;func&#39; any-identifier generic-params? func-signature brace-item-list?
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">func</span></code> is a declaration for a function.  The argument list and optional
return value are specified by the type production of the function, and the body
is either a brace expression or elided.  Like all other declarations, functions
are can have attributes.</p>
<p>If the type is not syntactically a function type (i.e., has no <code class="docutils literal"><span class="pre">-&gt;</span></code> in it at
top-level), then the return value is implicitly inferred to be <code class="docutils literal"><span class="pre">()</span></code>.  All of
the argument and return value names are injected into the &lt;a
href=&#8221;#namebind_scope&#8221;&gt;scope&lt;/a&gt; of the function body.&lt;/p&gt;</p>
<p>A function in an &lt;a href=&#8221;#decl-extension&#8221;&gt;extension&lt;/a&gt; of some type (or
in other places that are semantically equivalent to an extension) implicitly
get a <code class="docutils literal"><span class="pre">self</span></code> argument with these rules ... [todo]</p>
<p><code class="docutils literal"><span class="pre">static</span></code> and <code class="docutils literal"><span class="pre">class</span></code> functions are only allowed in an &lt;a
href=&#8221;#decl-extension&#8221;&gt;extension&lt;/a&gt; of some type (or in other places that are
semantically equivalent to an extension).  They indicate that the function is
actually defined on the &lt;a href=&#8221;#metatype&#8221;&gt;metatype&lt;/a&gt; for the type, not on
the type itself.  Thus its implicit <code class="docutils literal"><span class="pre">self</span></code> argument is actually of
metatype type.</p>
<p><code class="docutils literal"><span class="pre">static</span></code> keyword is allowed inside structs and enums, and extensions of those.</p>
<p><code class="docutils literal"><span class="pre">class</span></code> keyword is allowed inside classes, class extensions, and protocols.</p>
<p>TODO: Func should be an immutable name binding, it should implicitly add an
attribute immutable when it exists.</p>
<p>TODO: Incoming arguments should be readonly, result should be implicitly
writeonly when we have these attributes.</p>
<div class="section" id="function-signatures">
<span id="langref-decl-func-signature"></span><h4><a class="toc-backref" href="#id26">Function signatures</a><a class="headerlink" href="#function-signatures" title="Permalink to this headline">¬∂</a></h4>
<p>...</p>
<p>An argument name is a keyword argument if:
- It is an argument to an initializer, or
- It is an argument to a method after the first argument, or
- It is preceded by a back-tick (`), or
- Both a keyword argument name and an internal parameter name are specified.</p>
</div>
</div>
<div class="section" id="subscript-declarations">
<span id="langref-decl-subscript"></span><h3><a class="toc-backref" href="#id27"><code class="docutils literal"><span class="pre">subscript</span></code> Declarations</a><a class="headerlink" href="#subscript-declarations" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>subscript-head ::= attribute-list &#39;override&#39;? &#39;subscript&#39; pattern-tuple &#39;-&gt;&#39; type

decl-subscript ::= subscript-head &#39;{&#39; get-set &#39;}&#39;

// &#39;get&#39; is implicit in this syntax.
decl-subscript ::= subscript-head brace-item-list

// For use in protocols.
decl-subscript ::= subscript-head &#39;{&#39; get-set-kw &#39;}&#39;
</pre></div>
</div>
<p>A subscript declaration provides support for &lt;a href=&#8221;#expr-subscript&#8221;&gt;
subscripting&lt;/a&gt; an object of a particular type via a getter and (optional)
setter. Therefore, subscript declarations can only appear within a type
definition or extension.</p>
<p>The <code class="docutils literal"><span class="pre">pattern-tuple</span></code> of a subscript declaration provides the indices that
will be used in the subscript expression, e.g., the <code class="docutils literal"><span class="pre">i</span></code> in <code class="docutils literal"><span class="pre">a[i]</span></code>.  This
pattern must be fully-typed. The <code class="docutils literal"><span class="pre">type</span></code> following the arrow provides the
type of element being accessed, which must be materializable. Subscript
declarations can be overloaded, so long as either the <code class="docutils literal"><span class="pre">pattern-tuple</span></code> or
<code class="docutils literal"><span class="pre">type</span></code> differs from other declarations.</p>
<p>The <code class="docutils literal"><span class="pre">get-set</span></code> clause specifies the getter and setter used for subscripting.
The getter is a function whose input is the type of the <code class="docutils literal"><span class="pre">pattern-tuple</span></code> and
whose result is the element type.  Similarly, the setter is a function whose
result type is <code class="docutils literal"><span class="pre">()</span></code> and whose input is the type of the <code class="docutils literal"><span class="pre">pattern-tuple</span></code>
with a parameter of the element type added to the end of the tuple; the name
of the parameter is the <code class="docutils literal"><span class="pre">set-name</span></code>, if provided, or <code class="docutils literal"><span class="pre">value</span></code> otherwise.</p>
<div class="highlight-python"><div class="highlight"><pre>// Simple bit vector with storage for 64 boolean values
struct BitVector64 {
  var bits: Int64

  // Allow subscripting with integer subscripts and a boolean result.
  subscript (bit : Int) -&gt; Bool {
    // Getter tests the given bit
    get {
      return bits &amp; (1 &lt;&lt; bit)) != 0
    }

    // Setter sets the given bit to the provided value.
    set {
      var mask = 1 &lt;&lt; bit
      if value {
        bits = bits | mask
      } else {
        bits = bits &amp; ~mask
      }
    }
  }
}

var vec = BitVector64()
vec[2] = true
if vec[3] {
  print(&quot;third bit is set&quot;)
}
</pre></div>
</div>
</div>
<div class="section" id="attribute-lists">
<span id="langref-decl-attribute-list"></span><h3><a class="toc-backref" href="#id28">Attribute Lists</a><a class="headerlink" href="#attribute-lists" title="Permalink to this headline">¬∂</a></h3>
<p>...</p>
</div>
</div>
<div class="section" id="types">
<span id="langref-types"></span><h2><a class="toc-backref" href="#id29">Types</a><a class="headerlink" href="#types" title="Permalink to this headline">¬∂</a></h2>
<p>...</p>
<div class="section" id="fully-typed-types">
<span id="langref-types-fully-typed"></span><h3><a class="toc-backref" href="#id30">Fully-Typed Types</a><a class="headerlink" href="#fully-typed-types" title="Permalink to this headline">¬∂</a></h3>
<p>...</p>
</div>
<div class="section" id="materializable-types">
<span id="langref-types-materializable"></span><h3><a class="toc-backref" href="#id31">Materializable Types</a><a class="headerlink" href="#materializable-types" title="Permalink to this headline">¬∂</a></h3>
<p>...</p>
</div>
</div>
<div class="section" id="patterns">
<span id="langref-pattern"></span><h2><a class="toc-backref" href="#id32">Patterns</a><a class="headerlink" href="#patterns" title="Permalink to this headline">¬∂</a></h2>
<div class="admonition-commentary admonition">
<p class="first admonition-title">Commentary</p>
<p class="last">The pattern grammar mirrors the expression grammar, or to be more specific,
the grammar of literals.  This is because the conceptual algorithm for
matching a value against a pattern is to try to find an assignment of values
to variables which makes the pattern equal the value.  So every expression
form which can be used to build a value directly should generally have a
corresponding pattern form.</p>
</div>
<div class="highlight-none"><div class="highlight"><pre>pattern-atom ::= pattern-var
pattern-atom ::= pattern-any
pattern-atom ::= pattern-tuple
pattern-atom ::= pattern-is
pattern-atom ::= pattern-enum-element
pattern-atom ::= expr

pattern      ::= pattern-atom
pattern      ::= pattern-typed
</pre></div>
</div>
<p>A pattern represents the structure of a composite value.  Parts of a value can
be extracted and bound to variables or compared against other values by
<em>pattern matching</em>. Among other places, pattern matching occurs on the
left-hand side of <a class="reference internal" href="#langref-decl-var"><span>var bindings</span></a>, in the arguments of
<a class="reference internal" href="#langref-decl-func"><span>func declarations</span></a>, and in the &lt;tt&gt;case&lt;/tt&gt; labels
of <a class="reference internal" href="#langref-stmt-switch"><span>switch statements</span></a>.  Some examples:</p>
<div class="highlight-python"><div class="highlight"><pre>var point = (1, 0, 0)

// Extract the elements of the &quot;point&quot; tuple and bind them to
// variables x, y, and z.
var (x, y, z) = point
print(&quot;x=\(x) y=\(y) z=\(z)&quot;)

// Dispatch on the elements of a tuple in a &quot;switch&quot; statement.
switch point {
case (0, 0, 0):
  print(&quot;origin&quot;)
// The pattern &quot;_&quot; matches any value.
case (_, 0, 0):
  print(&quot;on the x axis&quot;)
case (0, _, 0):
  print(&quot;on the y axis&quot;)
case (0, 0, _):
  print(&quot;on the z axis&quot;)
case (var x, var y, var z):
  print(&quot;x=\(x) y=\(y) z=\(z)&quot;)
}
</pre></div>
</div>
<p>A pattern may be &#8220;irrefutable&#8221;, meaning informally that it matches all values
of its type.  Patterns in declarations, such as <a class="reference internal" href="#langref-decl-var"><span>var</span></a>
and <a class="reference internal" href="#langref-decl-func"><span>func</span></a>, are required to be irrefutable.  Patterns
in the <code class="docutils literal"><span class="pre">case</span></code> labels of <a class="reference internal" href="#langref-stmt-switch"><span>switch statements</span></a>,
however, are not.</p>
<p>The basic pattern grammar is a literal &#8220;atom&#8221; followed by an optional type
annotation.  Type annotations are useful for documentation, as well as for
coercing a matched expression to a particular kind.  They are also required
when patterns are used in a <a class="reference internal" href="#langref-decl-func-signature"><span>function signature</span></a>.  Type annotations are currently not allowed in
switch statements.</p>
<p>A pattern has a type.  A pattern may be &#8220;fully-typed&#8221;, meaning informally that
its type is fully determined by the type annotations it contains.  Some
patterns may also derive a type from their context, be it an enclosing pattern
or the way it is used;  this set of situations is not yet fully determined.</p>
<div class="section" id="typed-patterns">
<span id="langref-pattern-typed"></span><h3><a class="toc-backref" href="#id33">Typed Patterns</a><a class="headerlink" href="#typed-patterns" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>pattern-typed ::= pattern-atom &#39;:&#39; type
</pre></div>
</div>
<p>A type annotation constrains a pattern to have a specific type.  An annotated
pattern is fully-typed if its annotation type is fully-typed.  It is
irrefutable if and only if its subpattern is irrefutable.</p>
<p>Type annotations are currently not allowed in the <code class="docutils literal"><span class="pre">case</span></code> labels of <code class="docutils literal"><span class="pre">switch</span></code>
statements; case patterns always get their type from the subject of the switch.</p>
</div>
<div class="section" id="any-patterns">
<span id="langref-pattern-any"></span><h3><a class="toc-backref" href="#id34">Any Patterns</a><a class="headerlink" href="#any-patterns" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>pattern-any ::= &#39;_&#39;
</pre></div>
</div>
<p>The symbol <code class="docutils literal"><span class="pre">_</span></code> in a pattern matches and ignores any value. It is irrefutable.</p>
</div>
<div class="section" id="var-and-let-patterns">
<span id="langref-pattern-var"></span><h3><a class="toc-backref" href="#id35">&#8216;var&#8217; and &#8216;let&#8217; Patterns</a><a class="headerlink" href="#var-and-let-patterns" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>pattern-var ::= &#39;let&#39; pattern
pattern-var ::= &#39;var&#39; pattern
</pre></div>
</div>
<p>The <code class="docutils literal"><span class="pre">var</span></code> and <code class="docutils literal"><span class="pre">let</span></code> keywords within a pattern introduces variable bindings.
Any identifiers within the subpattern bind new named variables to their
matching values.  &#8216;var&#8217; bindings are mutable within the bound scope, and &#8216;let&#8217;
bindings are immutable.</p>
<div class="highlight-python"><div class="highlight"><pre>var point = (0, 0, 0)
switch point {
// Bind x, y, z to the elements of point.
case (var x, var y, var z):
  print(&quot;x=\(x) y=\(y) z=\(z)&quot;)
}

switch point {
// Same. &#39;var&#39; distributes to the identifiers in its subpattern.
case var (x, y, z):
  print(&quot;x=\(x) y=\(y) z=\(z)&quot;)
}
</pre></div>
</div>
<p>Outside of a &lt;tt&gt;var&lt;/tt&gt; pattern, an identifier behaves as an <a class="reference internal" href="#langref-pattern-expr"><span>expression
pattern</span></a> referencing an existing definition.</p>
<div class="highlight-python"><div class="highlight"><pre>var zero = 0
switch point {
// x and z are bound as new variables.
// zero is a reference to the existing &#39;zero&#39; variable.
case (var x, zero, var z):
  print(&quot;point off the y axis: x=\(x) z=\(z)&quot;)
default:
  print(&quot;on the y axis&quot;)
}
</pre></div>
</div>
<p>The left-hand pattern of a <a class="reference internal" href="#langref-decl-var"><span>var declaration</span></a> and the
argument pattern of a <a class="reference internal" href="#langref-decl-func"><span>func declaration</span></a> are
implicitly inside a <code class="docutils literal"><span class="pre">var</span></code> pattern; identifiers in their patterns always bind
variables.  Variable bindings are irrefutable.</p>
<p>The type of a bound variable must be <a class="reference internal" href="#langref-types-materializable"><span>materializable</span></a> unless it appears in a <a class="reference internal" href="#langref-decl-func-signature"><span>func-signature</span></a> and is directly of a <code class="docutils literal"><span class="pre">inout</span></code>-annotated type.</p>
</div>
<div class="section" id="tuple-patterns">
<span id="langref-pattern-tuple"></span><h3><a class="toc-backref" href="#id36">Tuple Patterns</a><a class="headerlink" href="#tuple-patterns" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>pattern-tuple ::= &#39;(&#39; pattern-tuple-body? &#39;)&#39;
pattern-tuple-body ::= pattern-tuple-element (&#39;,&#39; pattern-tuple-body)* &#39;...&#39;?
pattern-tuple-element ::= pattern
</pre></div>
</div>
<p>A tuple pattern is a list of zero or more patterns.  Within a <a class="reference internal" href="#langref-decl-func-signature"><span>function
signature</span></a>, patterns may also be given a
default-value expression.</p>
<p>A tuple pattern is irrefutable if all its sub-patterns are irrefutable.</p>
<p>A tuple pattern is fully-typed if all its sub-patterns are fully-typed, in
which case its type is the corresponding tuple type, where each
<code class="docutils literal"><span class="pre">type-tuple-element</span></code> has the type, label, and default value of the
corresponding <code class="docutils literal"><span class="pre">pattern-tuple-element</span></code>.  A <code class="docutils literal"><span class="pre">pattern-tuple-element</span></code> has a
label if it is a named pattern or a type annotation of a named pattern.</p>
<p>A tuple pattern whose body ends in <code class="docutils literal"><span class="pre">'...'</span></code> is a varargs tuple.  The last
element of such a tuple must be a typed pattern, and the type of that pattern
is changed from <code class="docutils literal"><span class="pre">T</span></code> to <code class="docutils literal"><span class="pre">T[]</span></code>.  The corresponding tuple type for a varargs
tuple is a varargs tuple type.</p>
<p>As a special case, a tuple pattern with one element that has no label, has no
default value, and is not varargs is treated as a grouping parenthesis: it has
the type of its constituent pattern, not a tuple type.</p>
</div>
<div class="section" id="is-patterns">
<span id="langref-pattern-is"></span><h3><a class="toc-backref" href="#id37"><code class="docutils literal"><span class="pre">is</span></code> Patterns</a><a class="headerlink" href="#is-patterns" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>pattern-is ::= &#39;is&#39; type
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">is</span></code> patterns perform a type check equivalent to the <code class="docutils literal"><span class="pre">x</span> <span class="pre">is</span> <span class="pre">T</span></code> &lt;a
href=&#8221;#expr-cast&#8221;&gt;cast operator&lt;/a&gt;. The pattern matches if the runtime type of
a value is of the given type. <code class="docutils literal"><span class="pre">is</span></code> patterns are refutable and thus cannot
appear in declarations.</p>
<div class="highlight-python"><div class="highlight"><pre>class B {}
class D1 : B {}
class D2 : B {}

var bs : B[] = [B(), D1(), D2()]

for b in bs {
  switch b {
  case is B:
    print(&quot;B&quot;)
  case is D1:
    print(&quot;D1&quot;)
  case is D2:
    print(&quot;D2&quot;)
  }
}
</pre></div>
</div>
</div>
<div class="section" id="enum-element-patterns">
<span id="langref-pattern-enum-element"></span><h3><a class="toc-backref" href="#id38">Enum Element Patterns</a><a class="headerlink" href="#enum-element-patterns" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>pattern-enum-element ::= type-identifier? &#39;.&#39; identifier pattern-tuple?
</pre></div>
</div>
<p>Enum element patterns match a value of &lt;a href=&#8221;#type-enum&#8221;&gt;enum type&lt;/a&gt; if
the value matches the referenced <code class="docutils literal"><span class="pre">case</span></code> of the enum.  If the <code class="docutils literal"><span class="pre">case</span></code> has a
type, the value of that type can be matched against an optional subpattern.</p>
<div class="highlight-python"><div class="highlight"><pre>enum HTMLTag {
  case A(href: String)
  case IMG(src: String, alt: String)
  case BR
}

switch tag {
case .BR:
  print(&quot;&lt;br&gt;&quot;)
case .IMG(var src, var alt):
  print(&quot;&lt;img src=\&quot;\(escape(src))\&quot; alt=\&quot;\(escape(alt))\&quot;&gt;&quot;)
case .A(var href):
  print(&quot;&lt;a href=\&quot;\(escape(href))\&quot;&gt;&quot;)
}
</pre></div>
</div>
<p>Enum element patterns are refutable and thus cannot appear in declarations.
(They are currently considered refutable even if the enum contains only a
single <code class="docutils literal"><span class="pre">case</span></code>.)</p>
</div>
<div class="section" id="expressions-in-patterns">
<span id="langref-pattern-expr"></span><h3><a class="toc-backref" href="#id39">Expressions in Patterns</a><a class="headerlink" href="#expressions-in-patterns" title="Permalink to this headline">¬∂</a></h3>
<p>Patterns may include arbitrary expressions as subpatterns.  Expression patterns
are refutable and thus cannot appear in declarations.  An expression pattern is
compared to its corresponding value using the <code class="docutils literal"><span class="pre">~=</span></code> operator.  The match
succeeds if <code class="docutils literal"><span class="pre">expr</span> <span class="pre">~=</span> <span class="pre">value</span></code> evaluates to true.  The standard library provides
a default implementation of <code class="docutils literal"><span class="pre">~=</span></code> using <code class="docutils literal"><span class="pre">==</span></code> equality; additionally, range
objects may be matched against integer and floating-point values.  The <code class="docutils literal"><span class="pre">~=</span></code>
operator may be overloaded like any function.</p>
<div class="highlight-python"><div class="highlight"><pre>var point = (0, 0, 0)
switch point {
// Equality comparison.
case (0, 0, 0):
  print(&quot;origin&quot;)
// Range comparison.
case (-10...10, -10...10, -10...10):
  print(&quot;close to the origin&quot;)
default:
  print(&quot;too far away&quot;)
}

// Define pattern matching of an integer value to a string expression.
func ~=(pattern:String, value:Int) -&amp;gt; Bool {
  return pattern == &quot;\(value)&quot;
}

// Now we can pattern-match strings to integers:
switch point {
case (&quot;0&quot;, &quot;0&quot;, &quot;0&quot;):
  print(&quot;origin&quot;)
default:
  print(&quot;not the origin&quot;)
}
</pre></div>
</div>
<p>The order of evaluation of expressions in patterns, including whether an
expression is evaluated at all, is unspecified.  The compiler is free to
reorder or elide expression evaluation in patterns to improve dispatch
efficiency.  Expressions in patterns therefore cannot be relied on for side
effects.</p>
</div>
</div>
<div class="section" id="expressions">
<span id="langref-expr"></span><h2><a class="toc-backref" href="#id40">Expressions</a><a class="headerlink" href="#expressions" title="Permalink to this headline">¬∂</a></h2>
<p>...</p>
<div class="section" id="function-application">
<span id="langref-expr-call"></span><h3><a class="toc-backref" href="#id41">Function Application</a><a class="headerlink" href="#function-application" title="Permalink to this headline">¬∂</a></h3>
<p>...</p>
</div>
</div>
<div class="section" id="statements">
<span id="langref-stmt"></span><h2><a class="toc-backref" href="#id42">Statements</a><a class="headerlink" href="#statements" title="Permalink to this headline">¬∂</a></h2>
<p>...</p>
<div class="section" id="break-statement">
<span id="langref-stmt-break"></span><h3><a class="toc-backref" href="#id43"><code class="docutils literal"><span class="pre">break</span></code> Statement</a><a class="headerlink" href="#break-statement" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>stmt-return ::= &#39;break&#39;
</pre></div>
</div>
<p>The &#8216;break&#8217; statement transfers control out of the enclosing &#8216;for&#8217; loop or
&#8216;while&#8217; loop.</p>
</div>
<div class="section" id="continue-statement">
<span id="langref-stmt-continue"></span><h3><a class="toc-backref" href="#id44"><code class="docutils literal"><span class="pre">continue</span></code> Statement</a><a class="headerlink" href="#continue-statement" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>stmt-return ::= &#39;continue&#39;
</pre></div>
</div>
<p>The &#8216;continue&#8217; statement transfers control back to the start of the enclosing
&#8216;for&#8217; loop or &#8216;while&#8217; loop.</p>
<p>...</p>
</div>
<div class="section" id="switch-statement">
<span id="langref-stmt-switch"></span><h3><a class="toc-backref" href="#id45"><code class="docutils literal"><span class="pre">switch</span></code> Statement</a><a class="headerlink" href="#switch-statement" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>stmt-switch ::= &#39;switch&#39; expr-basic &#39;{&#39; stmt-switch-case* &#39;}&#39;

stmt-switch-case ::= (case-label | default-label) brace-item+
stmt-switch-case ::= (case-label | default-label) &#39;;&#39;

case-label ::= &#39;case&#39; pattern (&#39;where&#39; expr)? (&#39;,&#39; pattern (&#39;where&#39; expr)?)* &#39;:&#39;
default-label ::= &#39;default&#39; &#39;:&#39;
</pre></div>
</div>
<p>&#8216;switch&#8217; statements branch on the value of an expression by <a class="reference internal" href="#langref-pattern"><span>pattern
matching</span></a>.  The subject expression of the switch is evaluated
and tested against the patterns in its <code class="docutils literal"><span class="pre">case</span></code> labels in source order.  When a
pattern is found that matches the value, control is transferred into the
matching <code class="docutils literal"><span class="pre">case</span></code> block.  <code class="docutils literal"><span class="pre">case</span></code> labels may declare multiple patterns
separated by commas.  Only a single <code class="docutils literal"><span class="pre">case</span></code> labels may precede a block of
code.  Case labels may optionally specify a <em>guard</em> expression, introduced by
the <code class="docutils literal"><span class="pre">where</span></code> keyword; if present, control is transferred to the case only if
the subject value both matches the corresponding pattern and the guard
expression evaluates to true.  Patterns are tested &#8220;as if&#8221; in source order; if
multiple cases can match a value, control is transferred only to the first
matching case.  The actual execution order of pattern matching operations, and
in particular the evaluation order of <a class="reference internal" href="#langref-pattern-expr"><span>expression patterns</span></a>, is unspecified.</p>
<p>A switch may also contain a <code class="docutils literal"><span class="pre">default</span></code> block.  If present, it receives control
if no cases match the subject value.  The <code class="docutils literal"><span class="pre">default</span></code> block must appear at the
end of the switch and must be the only label for its block.  <code class="docutils literal"><span class="pre">default</span></code> is
equivalent to a final <code class="docutils literal"><span class="pre">case</span> <span class="pre">_</span></code> pattern.  Switches are required to be
exhaustive; either the contained case patterns must cover every possible value
of the subject&#8217;s type, or else an explicit <code class="docutils literal"><span class="pre">default</span></code> block must be specified
to handle uncovered cases.</p>
<p>Every case and default block has its own scope.  Declarations within a case or
default block are only visible within that block.  Case patterns may bind
variables using the <a class="reference internal" href="#langref-pattern-var"><span>var keyword</span></a>; those variables
are also scoped into the corresponding case block, and may be referenced in the
<code class="docutils literal"><span class="pre">where</span></code> guard for the case label.  However, if a case block matches multiple
patterns, none of those patterns may contain variable bindings.</p>
<p>Control does not implicitly &#8216;fall through&#8217; from one case block to the next.
<a class="reference internal" href="#langref-stmt-fallthrough"><span>fallthrough statements</span></a> may explicitly
transfer control among case blocks.  <a class="reference internal" href="#langref-stmt-break"><span>break</span></a> and
<a class="reference internal" href="#langref-stmt-continue"><span>continue</span></a> within a switch will break or continue
out of an enclosing &#8216;while&#8217; or &#8216;for&#8217; loop, not out of the &#8216;switch&#8217; itself.</p>
<p>At least one <code class="docutils literal"><span class="pre">brace-item</span></code> is required in every case or default block.  It is
allowed to be a no-op.  Semicolon can be used as a single no-op statement in
otherwise empty cases in switch statements.</p>
<div class="highlight-python"><div class="highlight"><pre>func classifyPoint(point: (Int, Int)) {
  switch point {
  case (0, 0):
    print(&quot;origin&quot;)

  case (_, 0):
    print(&quot;on the x axis&quot;)

  case (0, _):
    print(&quot;on the y axis&quot;)

  case (var x, var y) where x == y:
    print(&quot;on the y = x diagonal&quot;)

  case (var x, var y) where -x == y:
    print(&quot;on the y = -x diagonal&quot;)

  case (var x, var y):
    print(&quot;length \(sqrt(x*x + y*y))&quot;)
  }
}

switch x {
case 1, 2, 3:
  print(&quot;x is 1, 2 or 3&quot;)
default:
  ;
}
</pre></div>
</div>
</div>
<div class="section" id="fallthrough-statement">
<span id="langref-stmt-fallthrough"></span><h3><a class="toc-backref" href="#id46"><code class="docutils literal"><span class="pre">fallthrough</span></code> Statement</a><a class="headerlink" href="#fallthrough-statement" title="Permalink to this headline">¬∂</a></h3>
<div class="highlight-none"><div class="highlight"><pre>stmt-fallthrough ::= &#39;fallthrough&#39;
</pre></div>
</div>
<p><code class="docutils literal"><span class="pre">fallthrough</span></code> transfers control from a <code class="docutils literal"><span class="pre">case</span></code> block of a <a class="reference internal" href="#langref-stmt-switch"><span>switch
statement</span></a> to the next <code class="docutils literal"><span class="pre">case</span></code> or <code class="docutils literal"><span class="pre">default</span></code> block
within the switch.  It may only appear inside a <code class="docutils literal"><span class="pre">switch</span></code>.  <code class="docutils literal"><span class="pre">fallthrough</span></code>
cannot be used in the final block of a <code class="docutils literal"><span class="pre">switch</span></code>.  It also cannot transfer
control into a <code class="docutils literal"><span class="pre">case</span></code> block whose pattern contains <a class="reference internal" href="#langref-pattern-var"><span>var bindings</span></a>.</p>
</div>
</div>
<div class="section" id="standard-library">
<span id="langref-stdlib"></span><h2><a class="toc-backref" href="#id47">Standard Library</a><a class="headerlink" href="#standard-library" title="Permalink to this headline">¬∂</a></h2>
<div class="admonition-commentary admonition">
<p class="first admonition-title">Commentary</p>
<p class="last">It would be really great to have literate swift code someday, that way this
could be generated directly from the code.  This would also be powerful for
Swift library developers to be able to depend on being available and
standardized.</p>
</div>
<p>This describes some of the standard swift code as it is being built up.  Since
Swift is designed to give power to the library developers, much of what is
normally considered the &#8220;language&#8221; is actually just implemented in the
library.</p>
<p>All of this code is published by the &#8216;<code class="docutils literal"><span class="pre">swift</span></code>&#8216; module, which is implicitly
imported into each source file, unless some sort of pragma in the code
(attribute on an import?) is used to change or disable this behavior.</p>
</div>
<div class="section" id="builtin-module">
<span id="langref-stdlib-builtin"></span><h2><a class="toc-backref" href="#id48">Builtin Module</a><a class="headerlink" href="#builtin-module" title="Permalink to this headline">¬∂</a></h2>
<p>In the initial Swift implementation, a module named <code class="docutils literal"><span class="pre">Builtin</span></code> is imported
into every file.  Its declarations can only be found by &lt;a href=&#8221;#expr-dot&#8221;&gt;dot
syntax&lt;/a&gt;.  It provides access to a small number of primitive representation
types and operations defined over them that map directly to LLVM IR.</p>
<p>The existence of and details of this module are a private implementation detail
used by our implementation of the standard library.  Swift code outside the
standard library should not be aware of this library, and an independent
implementation of the swift standard library should be allowed to be
implemented without the builtin library if it desires.</p>
<p>For reference below, the description of the standard library uses the
&#8220;<code class="docutils literal"><span class="pre">Builtin.</span></code>&#8221; namespace to refer to this module, but independent
implementations could use another implementation if they so desire.</p>
<div class="section" id="simple-types">
<span id="langref-stdlib-simple-types"></span><h3><a class="toc-backref" href="#id49">Simple Types</a><a class="headerlink" href="#simple-types" title="Permalink to this headline">¬∂</a></h3>
<div class="section" id="void">
<h4><a class="toc-backref" href="#id50">Void</a><a class="headerlink" href="#void" title="Permalink to this headline">¬∂</a></h4>
<div class="highlight-python"><div class="highlight"><pre>// Void is just a type alias for the empty tuple.
typealias Void = ()
</pre></div>
</div>
</div>
<div class="section" id="int-int8-int16-int32-int64">
<span id="langref-stdlib-int"></span><h4><a class="toc-backref" href="#id51">Int, Int8, Int16, Int32, Int64</a><a class="headerlink" href="#int-int8-int16-int32-int64" title="Permalink to this headline">¬∂</a></h4>
<div class="admonition-commentary admonition">
<p class="first admonition-title">Commentary</p>
<p class="last">Having a single standardized integer type that can be used by default
everywhere is important.  One advantage Swift has is that by the time it is
in widespread use, 64-bit architectures will be pervasive, and the LLVM
optimizer should grow to be good at shrinking 64-bit integers to 32-bit in
many cases for those 32-bit architectures that persist.</p>
</div>
<div class="highlight-python"><div class="highlight"><pre>// Fixed size types are simple structs of the right size.
struct Int8  { value : Builtin.Int8 }
struct Int16 { value : Builtin.Int16 }
struct Int32 { value : Builtin.Int32 }
struct Int64 { value : Builtin.Int64 }
struct Int128 { value : Builtin.Int128 }

// Int is just an alias for the 64-bit integer type.
typealias Int = Int64
</pre></div>
</div>
</div>
<div class="section" id="langref-stdlib-float">
<span id="id1"></span><h4><a class="toc-backref" href="#id52">Int, Int8, Int16, Int32, Int64</a><a class="headerlink" href="#langref-stdlib-float" title="Permalink to this headline">¬∂</a></h4>
<div class="highlight-python"><div class="highlight"><pre>struct Float  { value : Builtin.FPIEEE32 }
struct Double { value : Builtin.FPIEEE64 }
</pre></div>
</div>
</div>
<div class="section" id="bool-true-false">
<span id="langref-stdlib-bool"></span><h4><a class="toc-backref" href="#id53">Bool, true, false</a><a class="headerlink" href="#bool-true-false" title="Permalink to this headline">¬∂</a></h4>
<div class="highlight-python"><div class="highlight"><pre>// Bool is a simple enum.
enum Bool {
  true, false
}

// Allow true and false to be used unqualified.
var true = Bool.true
var false = Bool.false
</pre></div>
</div>
</div>
</div>
<div class="section" id="arithmetic-and-logical-operations">
<span id="langref-stdlib-oper"></span><h3><a class="toc-backref" href="#id54">Arithmetic and Logical Operations</a><a class="headerlink" href="#arithmetic-and-logical-operations" title="Permalink to this headline">¬∂</a></h3>
<div class="section" id="arithmetic-operators">
<span id="langref-stdlib-oper-arithmetic"></span><h4><a class="toc-backref" href="#id55">Arithmetic Operators</a><a class="headerlink" href="#arithmetic-operators" title="Permalink to this headline">¬∂</a></h4>
<div class="highlight-python"><div class="highlight"><pre>func * (lhs: Int, rhs: Int) -&gt; Int
func / (lhs: Int, rhs: Int) -&gt; Int
func % (lhs: Int, rhs: Int) -&gt; Int
func + (lhs: Int, rhs: Int) -&gt; Int
func - (lhs: Int, rhs: Int) -&gt; Int
</pre></div>
</div>
</div>
<div class="section" id="relational-and-equality-operators">
<span id="langref-stdlib-oper-comparison"></span><h4><a class="toc-backref" href="#id56">Relational and Equality Operators</a><a class="headerlink" href="#relational-and-equality-operators" title="Permalink to this headline">¬∂</a></h4>
<div class="highlight-python"><div class="highlight"><pre>func &lt;  (lhs : Int, rhs : Int) -&gt; Bool
func &gt;  (lhs : Int, rhs : Int) -&gt; Bool
func &lt;= (lhs : Int, rhs : Int) -&gt; Bool
func &gt;= (lhs : Int, rhs : Int) -&gt; Bool
func == (lhs : Int, rhs : Int) -&gt; Bool
func != (lhs : Int, rhs : Int) -&gt; Bool
</pre></div>
</div>
</div>
<div class="section" id="short-circuiting-logical-operators">
<span id="langref-stdlib-oper-short-circuit-logical"></span><h4><a class="toc-backref" href="#id57">Short Circuiting Logical Operators</a><a class="headerlink" href="#short-circuiting-logical-operators" title="Permalink to this headline">¬∂</a></h4>
<div class="highlight-python"><div class="highlight"><pre>func &amp;&amp; (lhs: Bool, rhs: ()-&gt;Bool) -&gt; Bool
func || (lhs: Bool, rhs: ()-&gt;Bool) -&gt; Bool
</pre></div>
</div>
<p>Swift has a simplified precedence levels when compared with C.  From highest to
lowest:</p>
<div class="highlight-python"><div class="highlight"><pre>&quot;exponentiative:&quot; &lt;&lt;, &gt;&gt;
&quot;multiplicative:&quot; *, /, %, &amp;
&quot;additive:&quot; +, -, |, ^
&quot;comparative:&quot; ==, !=, &lt;, &lt;=, &gt;=, &gt;
&quot;conjunctive:&quot; &amp;&amp;
&quot;disjunctive:&quot; ||
</pre></div>
</div>
</div>
</div>
</div>
</div>


           </div>
          </div>
          <footer>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright apple.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.1.9',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="../_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>